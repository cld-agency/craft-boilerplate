{% extends '_listing/default' %}

{# ======================================
GENERIC LISTING. NB: don't pass URL segment data
directly into craft.entries as it's a security
risk (effectively exposing all channel data to
the front end). Be sure to whitelist chosen
URIs in the switch/case statement instead. If
that's not enough flexiblity, create a dedicated
listing template e.g. _listings/{section-handle}.twig to override.

THE PURPOSE OF THIS TEMPLATE IS TO SET
ALL THE DATA READY FOR CONSUMPTION BY _listing/default.
========================================= #}


{# Example code only... #}

{# {% set title = entry.titleTag ? entry.titleTag : entry.title|replace('Listing','') %}
{% set metaDesc = entry.metaDesc ?? null %}

{% switch craft.app.request.segments|last %}

	{% case 'news' %}
		{% set entryIds = craft.entries.section('news').ids() %}
		{% set entriesSection = 'news' %}
		{% set entryCats = 'newsCategory' %}
		{% set categories = craft.categories({
			group: 'news',
			relatedTo: { sourceElement: entryIds }
		})%}

	{% case 'case-studies' %}
		{% set entryIds = craft.entries.section('caseStudies').ids() %}
		{% set entriesSection = 'caseStudies' %}
		{% set entryCats = 'caseStudyCategory' %}
		{% set categories = craft.categories({
			group: 'caseStudies',
			relatedTo: { sourceElement: entryIds }
		})%}

	{% case 'careers' %}
		{% set entriesSection = 'careers' %}
		{% set entryCats = null %}

	{% case 'press' %}
		{% set entriesSection = 'pressAndMedia' %}
		{% set entryCats = null %}

	{% case 'brochures' %}
		{% set entriesSection = 'downloads' %}
		{% set entryCats = null %}

{% endswitch %}

{% paginate craft.entries.section(entriesSection).limit(12) as pageInfo, pageEntries %} #}